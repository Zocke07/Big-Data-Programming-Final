### Top 10 Import By Country
#### For the full code, you can see here: https://github.com/Zocke07/Big-Data-Programming-Final/blob/main/ImportByCountry/ImportByCountry.py 
###### The specific html code that has been made to make the table: https://github.com/Zocke07/Big-Data-Programming-Final/blob/main/ImportByCountry/TableByCountry.html   
Here are the brief explanations of the code:  
```
import chardet
import pandas as pd
import matplotlib.pyplot as plt
```
The code imports the necessary libraries: chardet for character encoding detection, pandas for data manipulation and analysis, and matplotlib.pyplot for data visualization.  
```
with open('u2010im.csv', 'rb') as file:
    result = chardet.detect(file.read())
```
This block of code opens the file 'u2010im.csv' in binary mode ('rb'). It then reads the file contents and uses the chardet.detect() function to detect the character encoding of the file. The detected encoding is stored in the result variable.  
```
plt.rcParams["font.sans-serif"] = "DFKai-SB"
plt.rcParams["axes.unicode_minus"] = False
```
These two lines of code are used to configure the font settings and ensure proper rendering of Chinese characters and minus signs in matplotlib plots.  
```
data = pd.read_csv('u2010im.csv', encoding=result['encoding'])
data1 = data
```
These lines read the CSV file 'u2010im.csv' into a pandas DataFrame called data. The encoding parameter is set to result['encoding'], which is the detected encoding from the previous step. This ensures that the file is read correctly. The DataFrame data is then assigned to data1, creating a copy.  
```
country_index = 0
year_index = 273

countries = data.columns
values = data.iloc[year_index]

result = list(zip(countries, values))
```
These lines define the country_index and year_index variables to specify the desired indices for countries and values in the DataFrame. The countries variable stores the column names of the DataFrame, and the values variable stores the row values corresponding to the year_index.  
The zip() function is used to pair each country name with its corresponding value, and the result is converted to a list.  
```
for item in result:
    for i in item:
        if '洲' in str(i):
            result.remove(item)
```
This loop iterates over the result list and checks if any element (country or value) contains the character '洲'. If found, the entire item (pair) is removed from the result list.  
```
sorted_list = sorted(result[2:], key=lambda x: x[1], reverse=True)

topCountries = []
theValues = []

for n in range(10):
    topCountries.append(sorted_list[n][0])
    theValues.append(sorted_list[n][1])
```
These lines sort the result list based on the values (imports) in descending order using the sorted() function. The key=lambda x: x[1] specifies that the sorting should be based on the second element (value) of each item (pair).  
The top 10 countries and their corresponding values are extracted from the sorted list and stored in the topCountries and theValues lists respectively.  
```
def htmlTable():
    theTable = '<table border = 1>\n'
    theTable += '<tr>\n'
    theTable += '<td>Countries</td>\n'
    theTable += '<td>Imports from Country</td>\n'
    theTable += '</tr>\n'
    for row in range(len(topCountries)):
        theTable += '<tr>\n'
        theTable += f'<td>{topCountries[row]}</td>\n'
        theTable += f'<td>{theValues[row]}</td>\n'
        theTable += '</tr>\n'
    theTable += '</table>'
    return theTable

tableResult = htmlTable()

f = open("TableByCountry.html", "w", encoding='utf-8')
f.write(tableResult)
f.close()
```
This section defines a function htmlTable() that generates an HTML table based on the topCountries and theValues lists. The function iterates over the lists, creating rows and cells for each country and value pair.  
The tableResult variable stores the HTML table generated by the htmlTable() function.  
The code then opens a file named "TableByCountry.html" in write mode with UTF-8 encoding, writes the tableResult content to the file, and closes the file.  
```
fig, ax = plt.subplots(figsize=(10, 6))
plt.title("Import Trade Value")
plt.xlabel("Countries")
plt.ylabel("Imports from Country (Unit : US$ Thousand)")
ax.set_xticklabels(topCountries)
ax.ticklabel_format(style='plain', axis='y')
plt.plot(topCountries, theValues)
plt.show()
```
This block of code creates a figure and axis object for the plot using plt.subplots(). The figsize parameter is set to (10, 6) pixels to define the size of the plot.  
The plot title, x-axis label, and y-axis label are set using plt.title(), plt.xlabel(), and plt.ylabel() respectively.  
The ax.set_xticklabels() function sets the x-axis tick labels to be the values from the topCountries list.  
The ax.ticklabel_format() function is used to format the y-axis tick labels to be displayed in plain style (without scientific notation).  
Finally, a line plot is created using plt.plot() with topCountries as the x-values and theValues as the y-values. The plot is displayed using plt.show().  

-----
### Picture of Result
#### HTML-style presentation
![HtmlByCountry](https://github.com/Zocke07/Big-Data-Programming-Final/assets/91361456/8a641f0e-7685-4434-aef9-0e88d1296fe4)
#### Line graph-style presentation
![LineByCountry](https://github.com/Zocke07/Big-Data-Programming-Final/assets/91361456/e8efce1d-460c-4086-a3f7-9b9d9f652106)
